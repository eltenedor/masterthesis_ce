\documentclass[article,type=msc,colorback,accentcolor=tud2a]{tudthesis}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\usepackage{ngerman}
\usepackage[english]{babel} 


\usepackage[utf8]{inputenc} %input and fontencoding
\usepackage[T1]{fontenc}


\usepackage{nomencl} %for printing a list of symbols

\usepackage{amsmath,amsthm} %math environments

\usepackage{hyperref} %use hyperlinks in document
\usepackage{url} %display urls as such

\usepackage{listings} %load source code printer % use with \lstset{language=[77]Fortran} \begin{lstlisting} SOURCE \end{lstlisting}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\getmydate}{%
  \ifcase\month%
    \or Januar\or Februar\or M\"arz%
    \or April\or Mai\or Juni\or Juli%
    \or August\or September\or Oktober%
    \or November\or Dezember%
  \fi\ \number\year%
}

\begin{document}
\thesistitle{Implementation and Performance Analyses of a Highly Efficient Algorithm for Pressure-Velocity Coupling}{Implementierung und Untersuchung einer hoch effizienten Methode zur Druck-Geschwindigkeits-Kopplung}
  \author{Fabian Nuraddin Alexander Gabel}
  \referee{Prof. Dr. rer. nat. Michael Schäfer}{Dipl.-Ing Ulrich Falk}
  \department{Studienbereich CE}
  \group{FNB}
% \tuprints{12345}{1234}
  \makethesistitle
  \affidavit{F. Gabel}
  \tableofcontents

\printnomenclature
  \section{Introduction}

  This thesis is about. 

  \section{Fundamentals of Continuum Physics for Thermo-Hydrodynamical Problems}

    \subsection{Conservation of Mass -- Continuity Equation}
    \subsection{Conservation of Momentum -- Cauchy-Equations}
    \subsection{Conservation of Angular Momentum}
    \subsection{Closing the System of Equations -- Newtonian Fluids}
    \subsection{Conservation Law for Scalar Quantities}
        Introduce the generic transport equation and give physical interpretation of coefficients. Species transport or Temperature.
        Check also Peric p12 or Bird et al. (1962).
    \subsection{Necessary Simplification of Equations}
      \subsubsection{Incompressible Flows}
      \subsubsection{Variation of Fluid Properties -- Boussinesq Approximation}
      Talk about natural and forced convection. Differences for the solver algorithm. (s.a.) Peric P447
      Talk about flows with variation in fluid properties -> mms has to map this behaviour (Buoyancy force driven, i.e. naturally convected fluid)
      Also talk about non-dimensional values like Prandtl number, Rayleigh and Reynolds
    \subsection{Final Form of the Set of Equations}
        Conservative and Non-Conservative Form

  \section{Finite Volume Method for Incompressible Flows -- Theoretical Basics and Realisation in Code}

    \subsection{Fundamentals of Discretization}
      
      \subsubsection{Numerical Grid}
      \subsubsection{Approximation of Integrals}

    \subsection{Discretization of the Momentum Balance}
      
      \subsubsection{Semi Discretized Linearized Form of the Navier-Stokes Equations}
      \subsubsection{Treatment of Non-Orthogonality of Grid Cells -- Deferred Correction Approach}
        Cite Jsak and make some pretty pictures. Motivate each technique for non-orthogonal correction.
      \subsubsection{Calculation of Mass Flux -- Rhie-Chow Interpolation}
      \subsubsection{Discretization of the Convective Term}
      \subsubsection{Discretization of the Diffusive Term}
      \subsubsection{Discretization of the Source Term}
      \subsubsection{Assembly of Linear Systems -- Final Form of Equations}
         Coefficients of matrices for momentum are identical except in case of different factors for under-relaxation (when does this happen) for the main diagonal coefficient. Small example in code, then show image of assembled system.

    \subsection{Discretization of the Generic Transport Equation}

    \subsection{Segregated Methods -- the SIMPLE-Algorithm}
      
      \subsubsection{Pressure Correction Equation}
      \subsubsection{Characteristic Properties of Projection Methods}

        Under-relaxation, slow convergence, inner iterations outer iterations, relative tolerances

      \subsubsection{Coupling of Temperature Equation}

    \subsection{Boundary Conditions on Domain and Block Boundaries}
        Introduce chapter by talking about the nature of partial differential equations (Hackbusch). Always start with a simple implementation for the generic transport equation, then specialize to Navier-Stokes equation.
      \subsubsection{Dirichlet Boundary Condition}
        Only talk about dirichlet for velocities not for pressure.
      \subsubsection{Neumann Boundary Condition}
        Problematics of outlet boundary conditions
      \subsubsection{Symmetry Boundary Condition}
      \subsubsection{Wall Boundary Condition}
      \subsubsection{Block Boundary Condition}
      
    \subsection{Coupled Solution of the Navier-Stokes Equations}

      \subsubsection{Discretization of the Navier-Stokes Equations}
      \subsubsection{Differences to the Segregated Approach -- Implicit Coupling of Velocities, Pressure and Temperature}

          Implicit treatment of Pressure Gradient, Implicit Treatment of Temperature possible, Boussinesq approximation brings maximal coupling. Temperature dependent densities also possible

      \subsubsection{Assembly of Linear System}

      \subsubsection{Boundary Conditions}

    \subsection{Characteristic Properties of the Fully Coupled Solution Approach}

        Bad condition, singularity, faster convergence, coupling in Buoyancy flows (s.a. Peric page 448, Galpin Raithby)

    \subsection{Numerical Solution of Linear Systems}

        \subsubsection{Stone's SIP Solver}

          Basic Idea as in Schäfer or Peric

        \subsubsection{Krylov Subspace Methods}

          General concept of cyclic vector spaces of \(\mathbb{R}^n\), name some representative ksp algorithms, importance of preconditioning, not as detailed as in bachelor thesis

  \section{CAFFA Framework}

    \subsection{PETSc Framework}
        Keep in mind not to copy the manual but
      \subsubsection{About PETSc}

        Bell Prize, MPI Programming

      \subsubsection{Basic Data Types}

        Vec,Mat (Different Matrix Types and Their effect on complex methods)

      \subsubsection{KSP and PC Objects and Their Usage}

        Singularities

      \subsubsection{Profiling}

        PETSc Log 

      \subsubsection{Common Errors}

        Optimization, Interfaces, Compiler Errors not helpful, Preallocation vs. Mallocs

    \subsection{Grid Generation and Conversion}

      Generation of block structured grids, neighbouring relations are represented by a special type of boundary conditions; Random number generator to move grid points within a epsilon neighbourhood while maintaining the grid intact. Show in a graph how preallocation impacts on runtime.
    \subsection{Preprocessing}
    Matching algorithm -- the idea behind clipper and the used projection technique; alt.: Opencascade. Efficient calculation of values for discretization. Important for dynamic mesh refinement
    \subsection{Implementation Details of CAFFA}

      \subsubsection{MPI Programming Model}
        Basic idea of distributed memory programming model, emphasize the differences to shared memory model. Have a diagram at hand that shows how CAFFA sequentially works (schedule) and point out the locations where and of which type (global reduce, etc.) communication is, or when synchronization is necessary. Point out that one should try to minimize the number of this points such that parallel perfomance stays high. Better to calculate Velocity and Pressure Gradients at once not by seperately calling this routine.

        \subsubsection{Convergence Control} 
        Explain how the criterion for convergence is met 

        \subsubsection{Modi of Calculation}
          there are different modi of calculation, (NS segregated, then scalar; NS and Scalar Segregated; NS coupled and Scalar segregated; Fully coupled (wath out with fully coupled, this term seems to have already another meaning)). Note that for comparison of solvers it is crucial to develop programs on the same basis. This establishes comparability.

      \subsubsection{Indexing of Variables and Treatment of Boundary Values}
      Describe MatZeroValues and how it is used to simplify the code. Also loose a word on PCREDISTRIBUTE its advantages and downsides. Compliance of PETSc zero based indexing and CAFFA indexing which considers boundary values. Problems with boundary entries
      \subsubsection{Field Interlacing}
      Realization through special arrangement of variables and the use of index sets (subvector objects) and/or preprocessor directives. Advantages (there was a paper I cited in my thesis). Note that not all variables are interlaced (Velocities are, but their gradients are not). Great impact on Matrix structure.
      \subsubsection{Domain Decomposition, Exchange of Ghost Values and Parallel Matrix Assembly}

      Ghost values are stored in local representations of the global vector (state the mapping for those entries). Matrix coefficients are calculated on one processor and sent to the neighbour. Preallocation as crucial aspect for program performance. Present a simple method for balancing the matrix related load by letting PETSc take care of matrix distribution.Use Spy function of Matlab to visualize the sparse matrices. Point out advantages of calculating coefficients for the neighbouring cells locally (no need to update mass fluxes, geometric data doesn't need to be shared, small communication overhead since processors assemble matrix parts that don't belong to them (visualize)). Paradigm: Each time new information is available perform global updates. Advantages of using matrices: Show structure of matrix when using arbitrary matching vs. higher memory requirements vs. better convergence

    \subsection{Postprocessing}
    
      Visualization of Results with Paraview and Tecplot

  \section{Verification of CAFFA}
    
    Different parts, describe incremental approach, only present final results.
    Refer to next section for Validation of CAFFA

    \subsection{Theoretical Discretization Error}
      present the Taylor-Series Expansion

    \subsection{Method of Manufactured Solutions}
      basically sum up the important points of salari's technical report, symmetry of solution/domain/grid is bad
      point out that mms is not able to detect errors in the physical model
      Also loose a word or two about discontinuous manufactured solutions

    \subsection{Exact and Manufactured Solutions for the Navier-Stokes Equations and the Energy Equation}
    Not always there is an exact solution. Divergence free approach. Presentation of the used manufactured solution. What if solution is not divergence free? Derivation of equations and modifications to continuity equation. analyze the problem of too complicated manufactured solutions. also use temperature dependent density function
    \begin{itemize}
      \item \url{http://scicomp.stackexchange.com/questions/6943/manufactured-solutions-for-incompressible-navier-stokes-how-to-find-divergenc}
      \item \url{http://link.springer.com/article/10.1007/BF00948290}
      \item \url{http://physics.stackexchange.com/questions/60476/exact-solutions-to-the-navier-stokes-equations}
      \item \url{http://www.annualreviews.org/doi/pdf/10.1146/annurev.fl.23.010191.001111}
    \end{itemize}
    \subsection{Measurement of Error and Calculation of Order}
      Different error measures (L2-Norm,completeness of function space, consistency etc.)

      \subsubsection{Testcase on Single Processor on Orthogonal Grid}
      \subsubsection{Testcase on Multiple Processors on Non-Orthogonal Grid}

        Give a measure of the grid quality.

  \section{Comparison of Solver Concepts}
  
    \subsection{Convergence Behaviour on Locally Refined Block Structured Grids}

      Show how the implicit treatment of block boundaries maintains (high) convergence rates. Plot Residual over number of iterations.

    \subsection{Parallel Performance}
      \subsubsection{Employed Hardware and Software -- The Lichtenberg-High Performance Computer }
        \begin{itemize}
          \item Networking
          \item Mem Section and processes in between islands (calculating across islands)
          \item Versioning information (PETSc,INTEL COMPILERS,CLIPPER,MPI IMPLEMENTATION,BLAS/LAPACK)
          \item Software not designed to perform well on desktop PCs.
        \end{itemize}

      \subsubsection{Measures of Performance}
        \begin{itemize}
          \item Maße definieren
          \item Nochmal Hager,Wellein studieren
          \item Guidelines for measuring performance (bias through system processes or user interaction), only measure calculation time do not consider I/O in the beginning and the end
          \item Cite Schäfer and Peric with their different indicators for parallel efficiency, load balancing and numerical efficiency
        \end{itemize}
      \subsubsection{Preliminary Upper Bounds on Performance -- The STREAM Benchmark}
        Pinning of processes (picture), preliminary constraints by hardware and operating systems, identification of bottlenecks and explain possible workarounds, history and results of STREAM. Bandwidth as Bottleneck, how to calculate a Speedup estimate based on the measured bandwidth. PETSc Implementation of STREAM

      \subsubsection{Discussion of Results for Parallel Efficiency}
      \subsubsection{Speedup Measurement for Analytic Test Cases}

    \subsection{Test Cases with Varying Degree of Non-Linearity}
      
      As Peric says I want to prove that the higher the non-linearity of NS, the better relative convergence rates can be achieved with a coupled solver. Fi

      \subsubsection{Transport of a Passive Scalar -- Forced Convection}
      \subsubsection{Buoyancy Driven Flow -- Natural Convection}
      \subsubsection{Flow with Temperature Dependent Density -- A Highly Non-Linear Test Case}
        Maybe I could consider two test cases, one with oscillating density and one with a quadratic polynomial. Interesting would be also to consider the dependence of convergence on another scalar transport equation

    \subsection{Realistic Testing Scenarios -- Benchmarking}
        Also consider simple load balancing by distributing matrix rows equally
      
      \subsubsection{Flow Around a Cylinder 3D -- Stationary}
        Describe Testing Setup (Boundary conditions and grid). Present results and compare them with literature.
      \subsubsection{Flow Around a Cylinder 3D -- Instationary}
        \begin{itemize}
          \item\url{http://www.featflow.de/en/benchmarks/cfdbenchmarking/flow/dfg_flow3d/dfg_flow3d_configuration.html}
        \end{itemize}
        Describe Testing Setup (Boundary conditions and grid). Present results and compare them with literature.

      \subsubsection{Heat-Driven Cavity Flow}
        \begin{itemize}
          \item \url{http://www.featflow.de/en/benchmarks/cfdbenchmarking/mit_benchmark.html}
        \end{itemize}
        Describe Testing Setup (Boundary conditions and grid). Present results and compare them with literature.
    \subsection{Realistic Testing Scenario -- Complex Geometry}
        
  \section{Conclusion and Outlook}
    Turbulence, Multiphase (what about discontinuities), GPU-Accelerators, Load-Balancing, dynamic mesh refinement, Counjugate Heat Transfer with other requirements for the numerical grid, grid movement, list some papers here)
    Identify the optimal regimes / conditions for maximizing performance. Each solver concept has its strengths and weaknesses.
    Try other variants of Projection Methods like SIMPLEC, SIMPLER, PISO or PIMPLE (OpenFOAM)

\end{document}
