\documentclass[article,type=msc,colorback,accentcolor=tud2a]{tudthesis}
%\documentclass[article,type=msc,colorback,accentcolor=tud2a]{tudreport}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\usepackage{ngerman}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\getmydate}{%
  \ifcase\month%
    \or Januar\or Februar\or M\"arz%
    \or April\or Mai\or Juni\or Juli%
    \or August\or September\or Oktober%
    \or November\or Dezember%
  \fi\ \number\year%
}

\usepackage{masterthesis}

\begin{document}
\thesistitle{Implementation and Performance Analyses of a Highly Efficient Algorithm for Pressure-Velocity Coupling}{Implementierung und Untersuchung einer hoch effizienten Methode zur Druck-Geschwindigkeits-Kopplung}
%\title{Implementation and Performance Analyses of a Highly Efficient Algorithm for Pressure-Velocity Coupling}{Implementierung und Untersuchung einer hoch effizienten Methode zur Druck-Geschwindigkeits-Kopplung}
  \author{Fabian Gabel}
  \referee{Prof. Dr. rer. nat. Michael Schäfer}{Dipl.-Ing Ulrich Falk}
  \department{Studienbereich CE}
  \group{FNB}
% \tuprints{12345}{1234}
  \makethesistitle
% \maketitle
  \affidavit{F. Gabel}
  \tableofcontents
  \listoffigures
  \listoftables

\include{./tex/masterthesis.nomenclature}

  \section{Introduction}

  This thesis is about. 

  \include{./tex/masterthesis.fundamentals}
  \include{./tex/masterthesis.fvm}
  \include{./tex/masterthesis.seg}
  \include{./tex/masterthesis.cpld}

  \section{CAFFA Framework}

    \subsection{PETSc Framework}
        Keep in mind not to copy the manual
      \subsubsection{About PETSc}

        Bell Prize, MPI Programming

      \subsubsection{Basic Data Types}

        Vec,Mat (Different Matrix Types and Their effect on complex methods)

      \subsubsection{KSP and PC Objects and Their Usage}

        Singularities

      \subsubsection{Profiling}

        PETSc Log 

      \subsubsection{Common Errors}

      Optimization, Interfaces, (ROWMAJOR,COLUMNMAJOR), Compiler Errors not helpful, Preallocation vs. Mallocs

    \subsection{Grid Generation and Conversion}

      Generation of block structured locally refined grids with non-matching block interfaces, neighbouring relations are represented by a special type of boundary conditions; Random number generator to move grid points within a epsilon neighbourhood while maintaining the grid intact. Show in a graph how preallocation impacts on runtime.
    \subsection{Preprocessing}
    Matching algorithm -- the idea behind clipper and the used projection technique; alt.: Opencascade. Efficient calculation of values for discretization. Important for dynamic mesh refinement, arbitrary polygon matching, parallelizable due to easier interface

    \subsection{Implementation Details of CAFFA}

      \subsubsection{MPI Programming Model}
        Basic idea of distributed memory programming model, emphasize the differences to shared memory model. Have a diagram at hand that shows how CAFFA sequentially works (schedule) and point out the locations where and of which type (global reduce, etc.) communication is, or when synchronization is necessary.
        \begin{itemize}
          \item after each solve
          \item pressure reference
          \item error calculation
          \item gradient calculation
        \end{itemize}
        
        Point out that one should try to minimize the number of this points such that parallel performance stays high. Better to calculate Velocity and Pressure Gradients at once not by seperately calling this routine.

        \subsubsection{Convergence Control} 
        Explain how the criterion for convergence is met 

        \subsubsection{Modi of Calculation}
          there are different modi of calculation, (NS segregated, then scalar; NS and Scalar Segregated; NS coupled and Scalar segregated; Fully coupled (wath out with fully coupled, this term seems to have already another meaning)). Note that for comparison of solvers it is crucial to develop programs on the same basis. This establishes comparability.

      \subsubsection{Indexing of Variables and Treatment of Boundary Values}
      Describe MatZeroValues and how it is used to simplify the code. Also loose a word on PCREDISTRIBUTE its advantages and downsides. Compliance of PETSc zero based indexing and CAFFA indexing which considers boundary values. Problems with boundary entries
      \subsubsection{Field Interlacing}
      Realization through special arrangement of variables and the use of index sets (subvector objects) and/or preprocessor directives. Advantages (there was a paper I cited in my thesis). Note that not all variables are interlaced (Velocities are, but their gradients are not). Great impact on Matrix structure.
      \subsubsection{Domain Decomposition, Exchange of Ghost Values and Parallel Matrix Assembly}

      \begin{itemize}
        \item Ghost values are stored in local representations of the global vector (state the mapping for those entries). 
        \item Matrix coefficients are calculated on one processor and sent to the neighbour. 
        \item Preallocation as crucial aspect for program performance. For the coupled system the matrix is assembled in a 2-3 step process to save memory for coefficients. 
        \item Present a simple method for balancing the matrix related load by letting PETSc take care of matrix distribution. 
        \item Use Spy function of Matlab to visualize the sparse matrices. Point out advantages of calculating coefficients for the neighbouring cells locally (no need to update mass fluxes, geometric data doesn't need to be shared, small communication overhead since processors assemble matrix parts that don't belong to them (visualize)). 
        \item Paradigm: Each time new information is available perform global updates. Advantages of using matrices: Show structure of matrix when using arbitrary matching vs. higher memory requirements vs. better convergence
      \end{itemize}

    \subsection{Postprocessing}
    
      Visualization of Results with Paraview and Tecplot
      Export matrices as binaries and visualize them using matlab scripts.

  \section{Verification of CAFFA}
    
    Different parts, describe incremental approach, only present final results.
    Refer to next section for Validation of CAFFA

    \subsection{Theoretical Discretization Error}
      present the Taylor-Series Expansion

    \subsection{Method of Manufactured Solutions}
      basically sum up the important points of salari's technical report, symmetry of solution/domain/grid is bad
      point out that mms is not able to detect errors in the physical model
      Also loose a word or two about discontinuous manufactured solutions

    \subsection{Exact and Manufactured Solutions for the Navier-Stokes Equations and the Energy Equation}
    Not always there is an exact solution. Divergence free approach. Presentation of the used manufactured solution. What if solution is not divergence free? Derivation of equations and modifications to continuity equation. analyze the problem of too complicated manufactured solutions. also use temperature dependent density function. Explain why global mass conservation in a discrete sense is important and how it can be achived. Special domain, vanishing manufactured solution or symmetric manufactured solutions if a higher approximation of boundary fluxes is not feasible.
    \begin{itemize}
      \item \url{http://scicomp.stackexchange.com/questions/6943/manufactured-solutions-for-incompressible-navier-stokes-how-to-find-divergenc}
      \item \url{http://link.springer.com/article/10.1007/BF00948290}
      \item \url{http://physics.stackexchange.com/questions/60476/exact-solutions-to-the-navier-stokes-equations}
      \item \url{http://www.annualreviews.org/doi/pdf/10.1146/annurev.fl.23.010191.001111}
    \end{itemize}

    \subsection{Measurement of Error and Calculation of Order}
      Different error measures (L2-Norm,completeness of function space, consistency etc.)

      \subsubsection{Testcase on Single Processor on Orthogonal Locally Refined Grid}
      \subsubsection{Testcase on Multiple Processors on Non-Orthogonal Locally Refined Grid}

        Give a measure of the grid quality.

  \section{Comparison of Solver Concepts}
  
    \subsection{Convergence Behaviour on Locally Refined Block Structured Grids with Different Degrees of Coupling}

      Show how the implicit treatment of block boundaries maintains (high) convergence rates. Plot Residual over number of iterations.

    \subsection{Parallel Performance}
      \subsubsection{Employed Hardware and Software -- The Lichtenberg-High Performance Computer }
        \begin{itemize}
          \item Networking
          \item Mem Section and processes in between islands (calculating across islands)
          \item Versioning information (PETSc,INTEL COMPILERS,CLIPPER,MPI IMPLEMENTATION,BLAS/LAPACK)
          \item Software not designed to perform well on desktop PCs.
        \end{itemize}

      \subsubsection{Measures of Performance}
        \begin{itemize}
          \item Maße definieren
          \item Nochmal Hager,Wellein studieren
          \item Guidelines for measuring performance (bias through system processes or user interaction), only measure calculation time do not consider I/O in the beginning and the end
          \item Cite Schäfer and Peric with their different indicators for parallel efficiency, load balancing and numerical efficiency
        \end{itemize}

      \subsubsection{Preliminary Upper Bounds on Performance -- The STREAM Benchmark}
        Pinning of processes (picture), preliminary constraints by hardware and operating systems, identification of bottlenecks and explain possible workarounds, history and results of STREAM. Bandwidth as Bottleneck, how to calculate a Speedup estimate based on the measured bandwidth. PETSc Implementation of STREAM

      \subsubsection{Discussion of Results for Parallel Efficiency}
      \subsubsection{Speedup Measurement for Analytic Test Cases}

    \subsection{Test Cases with Varying Degree of Non-Linearity}
      
      As Peric says I want to prove that the higher the non-linearity of NS, the better relative convergence rates can be achieved with a coupled solver. Fi

      \subsubsection{Transport of a Passive Scalar -- Forced Convection}
      \subsubsection{Buoyancy Driven Flow -- Natural Convection}
      \subsubsection{Flow with Temperature Dependent Density -- A Highly Non-Linear Test Case}
        Maybe I could consider two test cases, one with oscillating density and one with a quadratic polynomial. Interesting would be also to consider the dependence of convergence on another scalar transport equation

    \subsection{Realistic Testing Scenarios -- Benchmarking}
        Also consider simple load balancing by distributing matrix rows equally
      
      \subsubsection{Flow Around a Cylinder 3D -- Stationary}
        Describe Testing Setup (Boundary conditions and grid). Present results and compare them with literature.
      \subsubsection{Flow Around a Cylinder 3D -- Instationary}
        \begin{itemize}
          \item\url{http://www.featflow.de/en/benchmarks/cfdbenchmarking/flow/dfg_flow3d/dfg_flow3d_configuration.html}
        \end{itemize}
        Describe Testing Setup (Boundary conditions and grid). Present results and compare them with literature.

      \subsubsection{Heat-Driven Cavity Flow}
        \begin{itemize}
          \item \url{http://www.featflow.de/en/benchmarks/cfdbenchmarking/mit_benchmark.html}
        \end{itemize}
        Describe Testing Setup (Boundary conditions and grid). Present results and compare them with literature.
    \subsection{Realistic Testing Scenario -- Complex Geometry}
        
  \section{Conclusion and Outlook}
  Turbulence (turbulent viscosity has to be updated in each iteration), Multiphase (what about discontinuities), GPU-Accelerators, Load-Balancing, dynamic mesh refinement, Counjugate Heat Transfer with other requirements for the numerical grid, grid movement, list some papers here)
    Identify the optimal regimes / conditions for maximizing performance. Each solver concept has its strengths and weaknesses.
    Try other variants of Projection Methods like SIMPLEC, SIMPLER, PISO or PIMPLE (OpenFOAM)

%testing purposes
    \nocite{*}

\clearpage
\addcontentsline{toc}{section}{References}
\bibliography{bib/masterthesis.articles}{}
\bibliographystyle{acm}
\end{document}
